<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aclfx.fish directory</title>
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; }
        .server-container { margin-bottom: 30px; }
        .status-online { color: green; font-weight: bold; }
        .status-offline { color: red; font-weight: bold; }
        .player-info { font-size: 0.9em; color: #555; }
        .timestamp { font-style: italic; color: #888; font-weight: normal; font-size: 0.85em; margin-left: 8px; }
        s { color: #888; }
    </style>
</head>
<body>
    <h1>list of servers:</h1>
    <ul>
        <li class="server-container">
            <p><strong>vanilla.aclfx.fish</strong>: <span id="vanilla-status">Checking...</span></p>
            <p id="vanilla-players" class="player-info"></p>
            <p><i>vanilla server running on latest MC with minor QoL plugins.</i></p>
        </li>

        <li class="server-container">
            <p><strong>atm8.aclfx.fish</strong>: <span id="atm8-status">Checking...</span></p>
            <p id="atm8-players" class="player-info"></p>
            <p><i>all the mods 8 modpack, running v1.1.0.</i></p>
        </li>

        <li class="server-container">
            <s><p>horror.aclfx.fish</p>
            <p><i>fear the nightfall: remains of chaos modpack, running v1.1.0.</i></p></s>
        </li>
    </ul>

    <script>
        async function updateServerStatus(address, statusId, playerId) {
            const statusEl = document.getElementById(statusId);
            const playerEl = document.getElementById(playerId);

            try {
                const response = await fetch(`https://api.mcstatus.io/v2/status/java/${address}`);
                
                if (!response.ok) throw new Error("API Error");
                
                const data = await response.json();
                
                // Get current time in HH:MM:SS format
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const timeSpan = `<span class="timestamp">as of ${time}</span>`;

                if (data.online) {
                    statusEl.innerHTML = `<span class="status-online">ONLINE</span> ${timeSpan}`;
                    playerEl.innerText = `Players: ${data.players.online} / ${data.players.max} | Version: ${data.version?.name_clean || 'Modded'}`;
                } else {
                    statusEl.innerHTML = `<span class="status-offline">OFFLINE</span> ${timeSpan}`;
                    playerEl.innerText = 'Server is currently offline.';
                }
            } catch (error) {
                statusEl.innerHTML = '<span class="status-offline">ERROR</span>';
                playerEl.innerText = 'Could not reach Status API.';
            }
        }

        function refreshAll() {
            updateServerStatus('vanilla.aclfx.fish', 'vanilla-status', 'vanilla-players');
            updateServerStatus('atm8.aclfx.fish', 'atm8-status', 'atm8-players');
        }

        refreshAll();
    </script>
</body>
</html>
